stages:
  - test

variables:
  GIT_SUBMODULE_STRATEGY: recursive
  GIT_SUBMODULE_DEPTH: 1

unit_test:
  stage: test
  image: gitlab-registry.airhead.ch/nvc-vunit
  variables:
    DOCKER_AUTH_CONFIG: |
      {
        "auths": {
          "gitlab-registry.airhead.ch": {
            "auth": "$CI_JOB_TOKEN"
          }
        }
      }
  script:
    - cd test && python3 ./run.py
